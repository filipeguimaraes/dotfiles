'use strict';Registry.registerRaw("page.js","87658639",(()=>({backup:function(a,C,u,V){let n,m,b,w,G,x,S,F,da,v,ea,K,ka;const d={};let e={safeWindow:d,safeDocument:{},eval,Context:{D:V},exec_fn:function(a,b,e){n(new d.Function(a),b,e)},exec_csp:function(a,b,d){const c=`__u__${19831206*e.Context.M_r()+1}`;e.Message.send("csp",{id:c,src:a});e.exec_script(c,b,d)},exec_script:function(b,d,e){const c=a[b];delete a[b];n(c,d,e)}};const H=(b,d)=>{a.console.error(`Tampermonkey sandbox preparation ${d?
"("+d+") ":""}failed. This usually is caused by a third-party extension.`,b);if(d)return()=>{}};try{(()=>{const c=a=>{const c=function(c){return n(a,c,n(b.wrappedJSObject,arguments,[1]))};c.wrappedJSObject=a;return c},T=(a,b)=>{let c;for(;null!==a&&void 0!==a&&!(c=da(a,b));)a=F(a);return c},fa={i_N:()=>v=(()=>a=>!("prototype"in a))(),i_SS:()=>ea=(()=>(a,b,c)=>{const d=T(a,b);if(!d||!d.set||v(d.set))return a[b]=c,!0})(),i_SG:()=>K=(()=>(a,b)=>{const c=T(a,b);if(!c||!c.get||v(c.get))return a[b]})(),
F_a:()=>n=(()=>{"use strict";const b=a.Function.apply;return(a,c,d)=>{let e;K(a,"apply")===b?e=a.apply(c,d):ea(a,u,b)&&(e=a[u](c,d),delete a[u]);return e}})(),E_u:()=>function(b,c){if(e.exec_eval){const d=`__u__${19831206*e.Context.M_r()+1}`;a[d]=c;return e.Context.F_c(e.Context.eval,a,`(function(that){${b}})((()=>{const k="${d}",r=this[k];delete this[k];return r;})())`)}e.exec_csp(`(function(that){${b}})(this)`,c)},F_c:()=>c(a.Function.call),F_b:()=>m=c(a.Function.bind),F_tS:()=>c(a.Function.toString),
A_fE:()=>G=c(a.Array.prototype.forEach),A_sl:()=>b=c(a.Array.prototype.slice),A_sp:()=>c(a.Array.prototype.splice),A_sh:()=>c(a.Array.prototype.shift),A_j:()=>c(a.Array.prototype.join),A_pu:()=>w=c(a.Array.prototype.push),A_po:()=>c(a.Array.prototype.pop),A_m:()=>c(a.Array.prototype.map),A_c:()=>c(a.Array.prototype.concat),A_f:()=>c(a.Array.prototype.filter),A_iO:()=>c(a.Array.prototype.indexOf),O_k:()=>a.Object.keys,O_dP:()=>a.Object.defineProperties,O_dPy:()=>a.Object.defineProperty,O_gOPN:()=>
a.Object.getOwnPropertyNames,O_gOPD:()=>da=a.Object.getOwnPropertyDescriptor,O_gOPDs:()=>a.Object.getOwnPropertyDescriptors||(a=>{const b={};for(const c in a)b[c]=fa.O_gOPD(a,c);return b}),O_gPO:()=>F=a.Object.getPrototypeOf,O_tS:()=>c(a.Object.prototype.toString),J_p:()=>S=a.JSON.parse,J_s:()=>x=a.JSON.stringify,c_l:()=>a.console.log.bind(a.console),c_i:()=>a.console.info.bind(a.console),c_w:()=>a.console.warn.bind(a.console),c_e:()=>a.console.error.bind(a.console),c_d:()=>a.console.debug.bind(a.console),
M_f:()=>a.Math.floor,M_r:()=>a.Math.random,M_m:()=>a.Math.max,M_i:()=>ka=c(a.MutationEvent.prototype.initMutationEvent),N_tS:()=>c(a.Number.prototype.toString),P_r:()=>a.Promise?a.Promise.resolve.bind(a.Promise):void 0,P_t:()=>a.Promise?c(a.Promise.prototype.then):void 0,P_c:()=>a.Promise?c(a.Promise.prototype.catch):void 0,R_rAAB:()=>a.FileReader?c(a.FileReader.prototype.readAsArrayBuffer):void 0,S_fCC:()=>a.String.fromCharCode,S_m:()=>c(a.String.prototype.match),S_su:()=>c(a.String.prototype.substr),
S_se:()=>c(a.String.prototype.search),S_sp:()=>c(a.String.prototype.split),S_r:()=>c(a.String.prototype.replace),S_cCA:()=>c(a.String.prototype.charCodeAt),S_tLC:()=>c(a.String.prototype.toLowerCase),S_tUC:()=>c(a.String.prototype.toUpperCase),D_pFS:()=>c(a.DOMParser.prototype.parseFromString),X_o:()=>c(a.XMLHttpRequest.prototype.open),X_sRH:()=>c(a.XMLHttpRequest.prototype.setRequestHeader),X_oMT:()=>c(a.XMLHttpRequest.prototype.overrideMimeType),X_gARH:()=>c(a.XMLHttpRequest.prototype.getAllResponseHeaders),
X_gRH:()=>c(a.XMLHttpRequest.prototype.getResponseHeader),X_s:()=>c(a.XMLHttpRequest.prototype.send),X_a:()=>c(a.XMLHttpRequest.prototype.abort),D_n:()=>a.Date.now};Object.keys(fa).forEach(a=>{try{e.Context[a]=fa[a]()}catch(D){e.Context[a]=H(D,`internal.${a}`)}});"String Array Object Number parseInt JSON Math Date Event MutationEvent console location Error Uint8Array Blob FileReader DOMParser XMLHttpRequest Function RegExp frames self top document location Promise".split(" ").forEach(b=>{try{d[b]=
a[b]}catch(D){d[b]=H(D,`window.${b}`)}});["postMessage","addEventListener","removeEventListener","setTimeout","setInterval","clearTimeout","clearInterval","alert","prompt","confirm","encodeURIComponent",(a=>a.a+a.b)({a:"decodeURI",b:"Component"}),"encodeURI","decodeURI","escape","unescape","atob","btoa","close"].forEach(b=>{try{const c=a[b];d[b]=function(){return n(c,a,arguments)}}catch(D){d[b]=H(D,`window.${b}`)}});e.createSafeDocument=a=>{"getElementById createEvent createElement dispatchEvent addEventListener removeEventListener".split(" ").forEach(b=>
{try{const c=a[b];e.safeDocument[b]=function(){return n(c,a,arguments)}}catch(ha){e.safeDocument[b]=H(ha,`document.${b}`)}})};e.createSafeDocument(C)})()}catch(c){return H(c)}try{e.Message=((a,b)=>{const c=function(){return n(b.dispatchEvent,b,arguments)},d=function(){return n(b.addEventListener,b,arguments)},e=function(){return n(b.removeEventListener,b,arguments)},v=(a,c)=>{const d=b.createEvent("MutationEvent");ka(d,a,!1,!1,null,null,null,x(c),d.ADDITION);return d};let m,p,u,L,F=1;const K={};let C=
[];const H=(a,b)=>{let c;a&&(c=K[a])&&(c(b),delete K[a])};let O=a=>{const b=S(a.attrName);"message.response"==b.m?H(b.r,b.a):m&&!1===m(b,b.r?a=>{a=v(u,{m:"message.response",a,r:b.r});c(a)}:()=>{})&&w(C,a)};return{init:function(a){L||(L=a);u=`2C_${L}`;p=`2P_${L}`;d(p,O,!1)},send:function(a,b,d){if(d){{const a=++F;K[F]=d;d=a}}else d=null;a=v(u,{m:a,a:b,r:d});c(a)},onMessage:{setListener:function(a,b){m=a;b||(G(C,a=>{O(a)}),C=null)}},cleanup:function(){O&&e(p,O,!1);O=null}}})(d,e.safeDocument),e.Message.init(u),
e.Message.onMessage.setListener(b=>{if(e)if("load"==b.m)e.Context.pageLoaded=!0;else if("DOMContentLoaded"==b.m)e.Context.domContentLoaded=!0;else if("cleanup"==b.m)e.Message.cleanup(),e=null;else if("next"==b.m)if(b.a.id)e.exec_script(b.a.id,e),e.exec_eval=!1;else{if(void 0===e.exec_eval)try{e.exec_eval=m(e.eval,a)("true")}catch(T){e.exec_eval=!1}e.exec_eval?e.exec_fn(b.a.src,e):e.exec_csp(b.a.src,e)}else return!1},!0)}catch(c){return H(c)}},next:function(a,C,u,V,n,m,b,w,G,x,S,F,da,v,ea){{let n=
"";w&&(n+="let V = true;");x&&(n+="let EV = true;");G&&(n+="let ENV = true;");n+=`let logLevel = ${b};`;b="";if(da||"complete"==document.readyState)b+="Context.pageLoaded |= true;Context.domContentLoaded |= true;";else if(v||"interactive"==document.readyState)b+="Context.domContentLoaded |= true;";a=`${n+`let contextId = "${a}";`+"const Event = function() {};const Window = function() {};Window.prototype = {};"+b}(${ea})(Context, contextId);\n`}return['const backup = this;(function TM_back() {const Context = backup.Context;const copy = function(src) {"use strict";const props = Context.O_gOPN(src);for (let kk, ii=0; (kk=props[ii]) !== undefined; ii++) {Context[kk] = src[kk];};};copy(backup);with (Context) {(() => {"use strict";copy({Context: Context,',
`V:!!${w},`,`ENV:!!${G},`,`TS:!!${S},`,`D:!!${F},`,`use:${m},`,`windowProps:${V},`,`scripts:${C},`,`powers:${u},`,"_content: false,",`flags:${n},`,'write_listeners: []});const cleanup = evt => {Message.cleanup();safeWindow.removeEventListener("unload", cleanup, false);};safeWindow.addEventListener("unload", cleanup, false);Context.write_listeners.push(d => {Context.createSafeDocument(d);Message.init();});',a,"})();};})();"].join("")},environment:function(a,C){const u=a.V,V=a.EV,n=a.D,m=a.Message,
b=a.safeWindow,w=window,G=a.safeDocument,x=a.flags,S=a.i_N,F=a.i_SS,da=a.i_SG,v=a.F_a,ea=a.F_c,K=a.F_b,ka=a.F_tS,d=a.A_fE,e=a.A_sl,H=a.A_sp,c=a.A_pu,T=a.A_po,fa=a.A_sh,W=a.A_j,D=a.A_f,ha=a.A_iO,Ga=a.A_c,p=a.O_k,la=a.O_dP,L=a.O_dPy,Ia=a.O_gOPN,Ja=a.O_gOPD,Ka=a.O_gOPDs,La=a.O_tS,O=a.J_p,ua=a.J_s,y=a.c_l,Ha=a.c_i,M=a.c_w,ma=a.c_e,P=a.c_d,Ma=a.M_f,xa=a.M_r,ya=a.M_m,Na=a.P_r,Oa=a.P_t,Pa=a.P_c,ia=a.S_fCC,pa=a.S_m,za=a.S_su,Aa=a.S_sp,X=a.S_r,na=a.S_se,Ba=a.S_cCA,va=a.S_tLC,Qa=a.S_tUC,Ra=a.R_rAAB,Sa=a.D_pFS,
Ca=a.X_o,Ta=a.X_sRH,Ua=a.X_oMT,Va=a.X_gARH,Wa=a.X_gRH,Da=a.X_s,Xa=a.X_a,Ya=a.N_tS,qa=a.D_n,ra=b.Promise||(()=>{M("There is no browser Promise support!")});a.domContentLoaded|=0;a.pageLoaded|=0;a.domNodeInserted|=0;a.props={};const Z=(()=>{const r=[],J=a=>{if(document.body)a&&(a(),a=null);else{const b=["load","DOMNodeInserted","DOMContentLoaded"],c=()=>{d(b,a=>{G.removeEventListener(a,c,!1)});J(a)};d(b,a=>{G.addEventListener(a,c,!1)})}},sa=d=>{c(r,()=>{b.setTimeout(d,1)});a.domContentLoaded&&g.runListeners()};
var g={runListeners:function(){let a;for(;a=fa(r);)a()},run:function(b){const d=()=>{wa.create(b)};"document-start"==b.script.options.run_at?(n&&P(`env: run "${b.script.name}" ASAP -> document-start`),wa.create(b)):"document-body"==b.script.options.run_at?(n&&P(`env: schedule "${b.script.name}" for document-body`),J(d)):"context-menu"==b.script.options.run_at?(n&&P(`env: run "${b.script.name}" ASAP -> context-menu`),wa.create(b)):"document-end"==b.script.options.run_at?(n&&P(`env: schedule "${b.script.name}" for document-end`),
c(r,d),a.domContentLoaded&&g.runListeners()):(n&&P(`env: schedule "${b.script.name}" for document-idle`),sa(d))}};return g})();(u||n)&&P(`env: initialized (content, id:${za(C,0,10)}..., ${b.location.origin}${b.location.pathname}) `);const aa={createUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const b=16*xa()|0;return Ya("x"==a?b:b&3|8,16)})},toType:function(a){return pa(La(a,{}),new b.RegExp("\\s([a-z|A-Z]+)"))[1]}},I={UTF8:{encode:function(a){return b.unescape(b.encodeURIComponent(a))},
decode:function(a){return b.decodeURIComponent(b.escape(a))}},Base64:{encode:function(a){let c="";for(let b=0;b<a.length;b++)c+=ia(Ba(a,b)&255);return b.btoa(c)},decode:function(a){return b.atob(a)}},str2arrbuf:function(a){const c=new b.Uint8Array(a.length);for(let b=0;b<a.length;b++)c[b]=Ba(a,b);return c.buffer},arrbuf2str:function(a){let c="";a=new b.Uint8Array(a);for(let b=0;b<a.length;b+=32687)c+=v(ia,null,a.subarray(b,b+32687));return c},blob2str:(a,c)=>{const d=new b.FileReader;d.onload=()=>
{c(I.arrbuf2str(d.result))};Ra(d,a)}},Q=(()=>{const a={};let b;const g=b=>{let k=[],g=[];var e={postMessage:function(a){m.send("port.message",{response_id:b,value:a})},onMessage:{addListener:function(a){c(k,a)}},onDisconnect:{addListener:function(a){c(g,a)}},disconnect:function(){m.send("port.message",{response_id:b,disconnect:!0});e=g=k=null;delete a[b]}};a[b]={message:function(a){k&&d(k,b=>{b(a)})},disconnect:function(c){g&&d(g,a=>{a(c)});e=g=k=null;delete a[b]}};return e};return{message:function(c){let d;
c.connect?b&&b(c.destination,g(c.response_id)):(d=a[c.response_id])?c.disconnect?d.disconnect():d.message(c.value):n&&M("ports: unkown id",c.response_id,c)},connect:function(a){const b=aa.createUUID();m.send("port.message",{response_id:b,connect:!0,destination:a});return g(b)},onConnect:{addListener:function(a){b=a}}}})(),Ea=(()=>{const a={objs:{},push:function(b,c){0!==c&&1!==c&&(c=0);const d=Ma(19831206*xa()+1);a.objs[d]={fn:b,prio:c};return d},remove:function(b){delete a.objs[b]},get:function(b){const g=
[];for(let e=0;1>=e;e++)d(p(a.objs),d=>{a.objs[d].prio!==e||void 0!==b&&d!=b||c(g,a.objs[d].fn)});return void 0===b?g:g[0]},finalize:function(b){if(void 0===b){b=a.get();for(var c=0;c<b.length;c++)b[c]()}else return a.objs[b]&&(c=a.objs[b].fn(),delete a.objs[b]),c}};return a})(),g=x.statistics?(a,c)=>{b.setTimeout(()=>{m.send("api",{name:a,type:c},null)},1)}:()=>{},U=(()=>{const a=(a,b)=>{g("GM_openInTab");let d=null,e=!1,k=null,v;const p=(()=>{const a=[];return{run:function(b){b&&c(a,b);if(d)for(;a.length;)T(a)()}}})();
let m=Q.connect("openInTab");m.onMessage.addListener(a=>{a.tabId?e?m&&m.postMessage({close:!0}):(d=a.tabId,p.run()):a.name?v=a.name:a.closed&&(e=!0,k&&(k(),k=void 0))});m.onDisconnect.addListener(()=>{m=null});m.postMessage({method:"openTab",url:a,options:b});a={};la(a,{close:{value:function(){g("GM_openInTab.close");e?n&&P("env: attempt to close already closed tab!"):m&&m.postMessage({close:!0})}},closed:{get:function(){g("GM_openInTab.closed");return e}},onclose:{get:function(){return k},set:function(a){g("GM_openInTab.onclose=");
k=a}},name:{get:function(){return v},set:function(a){p.run(()=>{g("GM_openInTab.name=");m&&m.postMessage({name:a})})}}});return a},e=function(a,c){g("GM_download");const d="Object"===aa.toType(a)?a:{url:a,name:c},e=(a,c)=>{c=c||{};a&&b.setTimeout(()=>{v(a,c,[c])},1)};let k=Q.connect("download");k.onMessage.addListener(a=>{try{a.load?d.onload&&e(d.onload,a.data):a.progress?d.onprogress&&e(d.onprogress,a.data):a.timeout?d.ontimeout&&e(d.ontimeout,a.data):d.onerror&&e(d.onerror,a.data)}catch($a){y("env: Error: TM_download - ",
$a,d)}});k.onDisconnect.addListener(()=>{k=null});(a=>{if(!x.blob_download_supported&&d.url.startsWith("blob:")){const c=new b.XMLHttpRequest;Ca(c,"GET",d.url);c.responseType="blob";c.onload=()=>{4==c.readyState&&I.blob2str(c.response,b=>{try{d.url=`data:application/octet-stream;base64,${I.Base64.encode(b)}`}catch(Za){M("env: Error: TM_download - ",Za,d)}a&&(a(),a=null)})};c.onerror=c.ontimeout=()=>{a&&(a(),a=null)};Da(c)}else a&&(a(),a=null)})(()=>{k.postMessage({details:d})});return{abort:function(){if(k)return k.postMessage({cancel:!0}),
k.disconnect(),k=null,!0}}},w=(a,b,c)=>{const d=aa.createUUID();m.send("addElement",{tag:a,properties:b,id:d},c?()=>{c()}:null);return G.getElementById(d)},F={};return{log:function(){g("GM_log");v(y,this,arguments)},addStyle:(a,b)=>{g("GM_addStyle");return w("style",{textContent:a},b)},addElement:(a,b,c)=>{g("GM_addElement");return w(a,b,c)},closeTab:a=>{g("window.close");m.send("closeTab",null,a?()=>{a()}:null)},focusTab:a=>{g("window.focus");m.send("focusTab",null,a?()=>{a()}:null)},setClipboard:(a,
b,c)=>{g("GM_setClipboard");m.send("setClipboard",{content:a,info:b,id:C},c?()=>{c()}:null)},syntaxCheck:(a,b)=>{m.send("syntaxCheck",{code:a},a=>{b(a)})},of:function(k){const r=k.script,w=(()=>{let a=[];const l=k.storage;let f=0;const t=(a,c)=>{if("string"===typeof a){const f=a[0];a=za(a,1);switch(f){case "b":return"true"===a;case "n":return b.Number(a);case "x":return I.UTF8.decode(I.Base64.decode(a));case "o":try{return O(a)}catch(E){y(`values: parseValueFromStorage: ${E}`)}return c;default:return a}}else return c},
e=(b,c,f,E)=>{c!=f&&d(a,a=>{if(a&&a.key==b&&a.cb)try{a.cb(b,t(c),t(f),E)}catch(N){n&&M(`values: change listener of "${b}" failed with: ${N.message}`)}})},q=a=>{h.postMessage({method:"saveStorageKey",uuid:r.uuid,key:a,value:l.data[a],id:C,ts:l.ts})};var h=Q.connect("values");h.onMessage.addListener(a=>{if(a.storage){var b=a.storage.data;a.removed&&(b[a.removed]=void 0);d(p(b),a=>{const c=l.data[a],f=b[a];void 0===f?delete l.data[a]:l.data[a]=f;u&&y(`values: message - config key ${a}: ${c} -> ${f}`);
e(a,c,f,!0)})}});h.onDisconnect.addListener(()=>{n&&y("values: port disconnected")});h.postMessage({method:"addStorageListener",uuid:r.uuid,id:C});return{set:function(a,b){g("GM_setValue");const c=l.data[a];l.ts=qa();var f=l.data;{let a=(typeof b)[0];switch(a){case "o":try{b=a+ua(b)}catch(A){y(A),b=void 0}break;case "s":const c=ia(8232),f=ia(8233);if(-1!==na(b,c)||-1!==na(b,f))a="x",b=I.Base64.encode(I.UTF8.encode(b));b=a+b;break;default:b=a+b}}f[a]=b;q(a);e(a,c,l.data[a],!1)},get:function(a,b){g("GM_getValue");
return t(l.data[a],b)},remove:function(a){g("GM_deleteValue");const b=l.data[a];l.ts=qa();delete l.data[a];q(a);e(a,b,l.data[a],!1)},list:function(){g("GM_listValues");return p(l.data)},registerChangeListener:function(b,d){g("GM_addValueChangeListener");const ja=++f;c(a,{id:ja,key:b,cb:d});return ja},unregisterChangeListener:function(b){g("GM_removeValueChangeListener");a=D(a,a=>a.id!==b?!0:!1)}}})(),J=(()=>({getText:function(a){g("GM_getResourceText");for(let b=0;b<r.resources.length;b++){const c=
r.resources[b];if(c.name==a&&!c.failed){try{if(null!==c.content)return I.UTF8.decode(c.content)}catch(t){}return""}}return null},getURL:function(a){g("GM_getResourceURL");for(let b=0;b<r.resources.length;b++){const c=r.resources[b];if(c.name==a&&!c.failed){if(null===c.content)return"";try{return`data:${c.meta||"application/octet-stream"};base64,${I.Base64.encode(c.content)}`}catch(t){}return c.url}}return null}}))(),H=(()=>({set:function(a,b){g("GM_setTab");m.send("tabs",{action:"set",uuid:r.uuid,
tab:a},b?()=>{b()}:null)},get:function(a){g("GM_getTab");m.send("tabs",{action:"get",uuid:r.uuid},a?b=>{a(b||{})}:null)},getAll:function(a){g("GM_getTabs");m.send("tabs",{action:"list",uuid:r.uuid},a?b=>{a(b||{})}:null)}}))(),sa=a=>{g("GM_xmlhttpRequest");let l=!1;const f=a.context;delete a.context;const t=(()=>{const a={};d(p(b.XMLHttpRequest.__proto__),b=>{a[b]=!0});const c=()=>{};d(p(b.XMLHttpRequest),f=>{a[f]||(c[f]=b.XMLHttpRequest[f])});return c})();let e=()=>{l=!0};const q=(a,c,f)=>{c=c||{};
!a||l&&!f||b.setTimeout(()=>{c.__proto__=t;v(a,c,[c])},1)};"object"===typeof a.url&&a.url.href&&(a.url=a.url.href);const h=(a,f)=>{let d,E,A,z=aa.toType(a);if("Blob"===z||"File"===z)I.blob2str(a,b=>{f({type:z,value:b,meta:a.type,name:a.name,lastModified:a.lastModified})});else if("FormData"===z)if(E=a.keys&&a.getAll?a.keys():null){let b;const N={};for(d=[];!(b=E.next()).done;)c(d,b.value);A=()=>{if(d.length){const b=T(d);let c=a.getAll(b);-1===na(b,/\[\]$/)&&(c=c[0]);h(c,a=>{N[b]=a;A()})}else f({type:"FormData",
value:N})};A()}else f({error:z});else if(!(z=aa.toType(a))||"Array"!==z&&"Object"!==z)f({value:a});else{let c,N,l=0;E=0;"Object"===z?(d=p(a),N=a=>a<d.length?d[a]:null,c={}):(N=b=>b<a.length?b:null,c=[]);A=()=>{const d=N(l);null===d?f({type:z,value:c}):h(a[d],a=>{a.error?f(a):(c[d]=a,l++,1024>E++?A():(E=0,b.setTimeout(A,1)))})};A()}},ca=a=>{const b={};a&&a.split("\n").forEach(a=>{(a=a.match(/^([^:]+): ?(.*)/))&&(b[a[1].toLowerCase()]=a[2]||"")});return b},oa=(a,c,f,d)=>{if("text"==f)a="document"==
c?a.document:a;else if("arraybuffer"==c)a=I.str2arrbuf(a);else if("blob"==c)a=new b.Blob([I.str2arrbuf(a)],{type:d});else if("json"==c)a=O(a);else if("document"==c){if(a.error){M("GM_xmlhttpRequest:",a.error);return}c=new b.DOMParser;return Sa(c,a.document,a.contentType)}return a};let ja=!0;(b=>{if(a.url){const c=a.url.substr(0,5);if(-1!=["data:","blob:"].indexOf(c))return ja=!1,b()}if(!a.data)return b();h(a.data,c=>{c.error?(ja=!1,M("GM_xmlhttpRequest:",`unable to handle data type ${c.error}. Going to use default xhr as fallback.`)):
(a.binary&&(c.type="Blob"),a.data=c,a.data_type="typified");b()})})(()=>{"use strict";if(!l)if(ja){let h=Q.connect("xhr"),t=[];a.headers&&d(p(a.headers),b=>{"cookie"===va(b)&&(a.cookie=a.headers[b],delete a.headers[b])});h.postMessage({method:"xhr",details:a,callbacks:{onloadstart:!!a.onloadstart,onload:!!a.onload,ondone:!!a.onloadend,onreadystatechange:!!a.onreadystatechange,onerror:!0,ontimeout:!!a.ontimeout,onprogress:!!a.onprogress,onpartial:!0},id:C,url:b.location.href,uuid:r.uuid});h.onMessage.addListener(b=>
{b.data&&f&&(b.data.context=f);if(b.data&&b.onload){t.length&&(b.data.response_data=W(t,""),t=null);if(b.data.response_data){const c=b.data.response_data,f=b.data;d(["response_data"],a=>{delete b.data[a]});const h={response:function(b,c){g(`${"GM_xmlhttpRequest"}.response[${a.responseType||"unknown"}]`);const f=a.responseType?va(a.responseType):"";let d="binary/octet-stream";c&&(d=ca(c.responseHeaders)["content-type"]||d);return oa(b,f,null,d)},responseText:function(b){g("GM_xmlhttpRequest.responseText");
const c=a.responseType?va(a.responseType):"";return oa(b,c,"text")},responseXML:function(a){g("GM_xmlhttpRequest.responseXML");return oa({document:a,contentType:"text/xml"},"document")}};d(p(h),a=>{L(b.data,a,{get:function(){try{return h[a](c,f)}catch(ab){M("GM_xmlhttpRequest:",ab)}}})})}q(a.onreadystatechange,b.data);q(a.onload,b.data)}else if(b.onreadystatechange)4!=b.data.readyState&&q(a.onreadystatechange,b.data);else if(b.onpartial)c(t,b.data.partial);else if(b.onerror)b.exception&&ma(b.exception),
q(a.onerror,b.data);else if(b.ondone)q(a.onloadend,b.data);else{const c=D(["onloadstart","onprogress","ontimeout"],a=>!!b[a])[0]||"onerror";q(a[c],b.data)}});u&&h.onDisconnect.addListener(()=>{y("env: GM_xmlhttpRequest.onDisconnect! :)")});e=()=>{g("GM_xmlhttpRequest.abort");h&&(h.disconnect(),h=null,l=!0,q(a.onabort,null,!0))}}else{const c=new b.XMLHttpRequest;void 0===a.async&&(a.async=!0);Ca(c,a.method,a.url,a.async,a.user,a.password);a.headers&&d(p(a.headers),b=>{Ta(c,b,a.headers[b])});a.overrideMimeType&&
Ua(c,a.overrideMimeType);a.responseType&&(c.responseType=a.responseType);d("abort error load loadstart progress readystatechange timeout".split(" "),b=>{const d="abort"==b;c[`on${b}`]=()=>{var h="";let l=a.url;if(2<c.readyState&&(h=Va(c),4==c.readyState)){h&&(h=X(h,/TM-finalURL[0-9a-zA-Z]*: .*[\r\n]{1,2}/,""));let a;try{a=Wa(c,`TM-finalURL${x.short_id}`)}catch(db){}a&&(l=a)}h={readyState:c.readyState,status:"",statusText:"",responseHeaders:h,finalUrl:l,context:f};4==c.readyState&&(c.responseType?
h.response=c.response:(h.responseText=c.responseText,h.responseXML=c.responseXML),h.status=c.status,h.statusText=c.statusText);q(a[`on${b}`],h,d)}});Da(c,a.data);e=()=>{g("GM_xmlhttpRequest.abort");Xa(c);l=!0}}});return{abort:function(){e()}}},G=a=>{const b={};d(p(a),c=>{b[c]=a[c]});b.id=C;g("GM_notification");b.text||b.highlight?m.send("notification",b,a=>{if(b.onclick&&a.clicked)b.onclick();if(b.ondone)b.ondone(!0===a.clicked)}):M("GM_notification: neither a message text nor highlight options were given!")};
let K;const P=()=>{if(K)return K;const a=k.script,b={id:1,enabled:1,hash:1,fileURL:1},c={script:{}};d(p(a),d=>{b[d]||(c.script[d]=a[d])});const t=a.options.updateURL||a.options.fileURL;c.script["run-at"]=a.options.override.run_at||a.options.run_at;c.script.excludes=a.options.override.orig_excludes;c.script.includes=a.options.override.orig_includes;c.script.matches=a.options.override.orig_matches;c.script.grant=a.grant;c.script.unwrap=!1;c.scriptMetaStr=k.header;c.scriptSource=k.code;c.scriptWillUpdate=
!!t;c.scriptUpdateURL=t;c.version=x.version;c.scriptHandler="Tampermonkey";c.isIncognito=x.inIncognitoContext;c.isFirstPartyIsolation=x.isFirstPartyIsolation;c.downloadMode=x.downloadMode;return K=c};let Y;const oa=(a,b)=>{g("GM_webRequest");const c=()=>{Y==d&&(Y=null);d=null};Y&&Y.disconnect();var d=Y=Q.connect("webRequest");b&&d.onMessage.addListener(a=>{b(a.type,a.message||"ok",a.details)});d.onDisconnect.addListener(c);d.postMessage({rules:a,uuid:r.uuid});return{abort:function(){g("GM_webRequest.abort");
d&&d.disconnect();c()}}},ca=(()=>{let a=0;const c={},d={register:function(f,e,l){g("GM_registerMenuCommand");const h=++a,t=Q.connect("registerMenuCommand");t.onMessage.addListener(a=>{"run"===a&&b.setTimeout(e,1)});t.onDisconnect.addListener(()=>{d.unregister(h)});t.postMessage({method:"register",name:f,uuid:r.uuid,accessKey:l});u&&y(`env: ${"registerMenuCommand"} ${ka(e)}`);c[h]=t.disconnect;return h},unregister:function(a){g("GM_unregisterMenuCommand");u&&y(`env: ${"unregisterMenuCommand"} ${a}`);
let b;if(b=c[a])b(),delete c[a]}};return d})(),ta=(()=>{"use strict";const a=(a,c)=>({action:a,uuid:r.uuid,url:b.location.href,details:c});return{set:function(b,c){g("GM_cookie.set");m.send("cookie",a("set",b),c?a=>{c(a.error)}:null)},delete:function(b,c){g("GM_cookie.delete");m.send("cookie",a("delete",b),c?a=>{c(a.error)}:null)},list:function(b,c){g("GM_cookie.list");m.send("cookie",a("list",b),c?a=>{c(a.cookies,a.error)}:null)}}})();F[k.script.uuid]=F[k.script.uuid]||{getInfo:P,registerMenuCommand:ca.register,
unregisterMenuCommand:ca.unregister,download:e,webRequest:oa,openInTab:a,setValue:w.set,getValue:w.get,deleteValue:w.remove,listValues:w.list,addValueChangeListener:w.registerChangeListener,removeValueChangeListener:w.unregisterChangeListener,getResourceText:J.getText,getResourceURL:J.getURL,notification:G,xmlhttpRequest:sa,cookie:ta,setTab:H.set,getTab:H.get,getTabs:H.getAll};return F[k.script.uuid]}}})();var wa=(()=>{const r=(a,b,c,e)=>{const l=Ka(b);d(p(l),c=>{const d=l[c];if(!d||!d.get||S(d.get)||
e)"function"===typeof b[c]?a[c]=K(b[c],b):(()=>{L(a,c,{get:function(){"use strict";return b[c]}})})()});d(p(c),b=>{a[b]=c[b]});return a},J=(a,c,d,e,l)=>{const f=c[d],t=typeof f;e&&"string"===t?c[d]=new b.Function(f):l&&"function"===t&&(c[d]=function(){return v(f,l,arguments)});return v(a,w,c)},C=(a,c,e,g)=>{const l={attrChange:0,attrName:null,bubbles:!0,cancelBubble:!1,cancelable:!1,clipboardData:void 0,currentTarget:null,defaultPrevented:!1,eventPhase:0,newValue:null,prevValue:null,relatedNode:null,
returnValue:!0,srcElement:null,target:null,timeStamp:qa()};e="string"===typeof e?new b.Function(e):e;const f=new Event;d(p(l),a=>{f[a]=l[a]});d(p(c),a=>{f[a]=c[a]});f.type=a;v(e,g,[f])},Y=(a,b,c,e)=>{void 0===e&&(e=(a,b)=>b);d(Ga(["GM_info","GM.info"],b),b=>{let d;const g=c[b];g&&(d=e(b,g))&&(a[b]=d)})},k=(a,b)=>{void 0===b&&(b=100);return b&&a&&(a==document||k(a.parentNode,b-1))},I=(()=>{let b=null;return c=>{b||(b={instance:c,is_open:!1},d(["write","writeln","open","close"],e=>{b[e]=c[e];c[e]=function(){let g=
!1;-1!=ha(["write","writeln","open"],e)?b.is_open?g=!0:b.is_open=!0:"close"===e&&(b.is_open=!1);!g&&b.is_open&&m.send("document.write");const l=document.documentElement,f=v(b[e],c,arguments);if(!g&&b.is_open)return l!==document.documentElement&&(b.instance!==c&&(b=null,I(document)),d(a.write_listeners,a=>{a(document)})),f}}))}})(),G={},D=[],O=[],Q=(d,e,g)=>{let m;O.forEach(a=>{a.object===d&&(m=!0)});if(!m){const l={object:d,addEventListener:d.addEventListener,removeEventListener:d.removeEventListener};
O.push(l);const f=[],t=a=>{for(let b=0;b<f.length;b++)if(f[b].fn===a)return b};d.removeEventListener=function(a,b,c){c=!!c;let d,h,e;if(void 0!==(d=t(b))&&(h=f[d].listeners)){if(e=h[`${a}-${c}`])v(l.removeEventListener,this,[a,e,c]),delete h[`${a}-${c}`];Ia(h).length||H(f,d,1)}else return v(l.removeEventListener,this,arguments)};const m=(a,d,e,f)=>{if(d){let c=D.length;d=b.parseInt(W(["DOMContentLoaded"==e?1:2,f?1:2,f?d:3-d,qa()],"0"));for(e=0;e<D.length;e++)if(f=D[e],!f||!f.prio||f.prio>d){c=e;break}H(D,
c,0,{prio:d,fn:a})}else c(D,{fn:a})};d.addEventListener=function(d,h,p){(u||V)&&y(`env: addEventListener ${d}`);const q=this;if(h&&(1==e&&"load"==d||"DOMContentLoaded"==d||"DOMNodeInserted"==d)){p=!!p;var k;try{try{throw new b.Error;}catch(z){const a=/tms_[0-9a-f_]+/;var E=z.stack||z.stacktrace;if(E){const b=Aa(E,"\n");for(let c,d=0;d<b.length&&(!(c=pa(b[d],a))||!(k=G[c[0]]));d++);}else{const c=(d,h)=>{void 0===h&&(h=10);if(0===h)return null;if(d.caller){let e,f;try{return f=ka(d.caller),pa(f,new b.RegExp("^function[^(]+"))&&
(void 0).length&&(e=pa((void 0)[0],a))?e[0]:c(d.caller,h-1)}catch(bb){n&&M("env: unable to detect caller context",bb)}}return null};let d;if(d=c(arguments.callee))k=G[d]}}}catch(z){n&&ma(`env: Error: event ${d}`,z)}if(k&&"document-idle"!==k.run_at&&(k=null,"load"==d?a.pageLoaded&&(k=()=>{var a=h,c=q.document||q;(u||V)&&y("env: postLoadEvent!");c=c||document;C("load",{attrName:"null",newValue:"null",prevValue:"null",eventPhase:b.Event.AT_TARGET,attrChange:b.MutationEvent.ADDITION,target:c,relatedNode:c,
srcElement:c},a,q)},m(k,e,d,p)):"DOMContentLoaded"==d&&a.domContentLoaded&&(k=()=>{var a=h,c=q.document||q;(u||V)&&y("env: postDomEventListener!");c=c||document;C("DOMContentLoaded",{attrName:"null",newValue:"null",prevValue:"null",eventPhase:b.Event.AT_TARGET,attrChange:b.MutationEvent.ADDITION,target:c,relatedNode:c,srcElement:c},a,q)},m(k,e,d,p)),k)){b.setTimeout(()=>{if(D.length){const a=fa(D);a&&a.fn&&a.fn()}},1);return}E=function(a){return J(ea,[h,this,g(a)],0,!0,q)};void 0===(k=t(h))&&(k=f.length,
c(f,{fn:h,listeners:{}}));f[k].listeners[`${d}-${p}`]=E;return v(l.addEventListener,q,[d,E,p])}return v(l.addEventListener,q,arguments)};try{const a=()=>"[native code]";[d.addEventListener,d.removeEventListener].forEach(b=>{F(b,"toString",a)})}catch(q){}}},T=a=>{a.__evaluate||(la(a,{__evaluate:{value:a.evaluate,enumerable:!1,configurable:!1}}),a.evaluate=function(a,b,c,d,e){u&&y(`env: document.evaluate ${a}`);b||(b=this);let f;if("undefined"!=typeof XPathResult){let g=a,l=null;try{f=this.__evaluate(g,
b,c,d,e)}catch(R){l=R}let h=!1;try{h|=!!f.snapshotLength}catch(R){}try{h|=!!f.singleNodeValue}catch(R){}if(h||"."==a[0]||k(b))u&&y(`env: queried document for ${g}`);else{u&&y(`env: query added elem for ${g}`);g=("/"==a[0]?".":"./")+a;try{f=this.__evaluate(g,b,c,d,e)}catch(R){}}u&&y("env: query returned ",f,l);if(!h&&l)throw l;}else u&&y("env: XPathResult == undefined, but selectNodes via ",a),f=b.selectNodes(a);return f},c(Ea,()=>{a.evaluate=a.__evaluate}))},ia=(c,e)=>{const g=["eval"],k={};d(p(c),
a=>{c[a].context_prop&&(k[(a.split(".")||[])[1]]=!0)});const l=(a,c,e,l)=>{const h=b=>b===c?a:b,f=(a,b,c,d)=>{c||(c=a);const e=a[b];a=function(){"use strict";let a=v(e,c,arguments);d&&(a=d(a));return a};a.__proto__=e;a.prototype=e.prototype;return a},m=c=>{let d;const e=c.substr(2);let h;L(a,c,{get:function(){return d},set:function(c){"use strict";(d=c)&&!h?(h=function(){if("function"===typeof d)return v(d,a,arguments)},b.addEventListener(e,h,!0)):!d&&h&&(b.removeEventListener(e,h,!0),h=null)}})},q=(b,
d,e,f)=>{let g,A,l;const z={enumerable:!0,configurable:!0};(l="function"===typeof d)?z.get=d:z.get=function(){"use strict";f&&f.get_cb&&v(f.get_cb,this,[arguments,q]);return A?g:h(c[b])};if("function"===typeof e)z.set=e;else if(!l||e)z.set=c=>{f&&f.overwrite?L(a,b,{value:c,enumerable:!0,configurable:!0}):(g=c,A=!0)};L(a,b,z)};d(p(l),a=>{e[a]=e[a]||!1!==l[a]});const E=x.sandbox_allow_getters,z=x.detect_constructors_by_keys;d(p(e),b=>{let d,A,t,n,r,N,u,R,ca,B,y,ta,Fa,x;try{let ba;(ba=Ja(c,b))&&ba.get&&
(r=!S(ba.get));try{if(!(A=l[b])||A.needs_grant&&!0!==k[b])if((d=e[b])&&d.event)Fa=!0;else if(ba&&ba.get)if(r)if(E)u=!0;else return;else u=()=>{"use strict";return h(v(ba.get,w))};else"function"===(n=typeof(t=c[b]))?d.proto?N=!0:(ba.enumerable||!(z&&p(t).length||!S(t)))&&-1==ha(g,b)&&"bind"in t?y=!0:B=!0:"number"===n||"string"===n?u=!0:B=!0;else if(A.wrap)N=!0,ta=A.that;else if(A.direct)B=!0;else if(A.enhance)x=A.enhance;else if(A.get||A.set)u=A.get,R=A.set,ca=A.opts}catch(eb){u=R=!0}if(x)a[b]=x;else if(!r||
E)Fa?m(b):u||R?q(b,u,R,ca):N?a[b]=f(c,b,ta,h):B?a[b]=h(c[b]):y&&(a[b]=K(c[b],c))}catch(cb){M(`env: error while creating a new sandbox[${b}]: ${cb.message}`)}});return a};return(()=>{const c=new Window,g={setTimeout:{enhance:function(){"use strict";return J(b.setTimeout,arguments,0,!0,c)}},setInterval:{enhance:function(){"use strict";return J(b.setInterval,arguments,0,!0,c)}},close:{needs_grant:!0,get:function(){"use strict";return b.self==b.top?a=>U.closeTab(a):b.close}},focus:{needs_grant:!0,get:function(){return a=>
{"use strict";return U.focusTab(a)}}},location:{get:!0,set:function(a){"use strict";b.location.href=a}},name:{get:function(){"use strict";return da(w,"name")},set:function(a){"use strict";F(w,"name",a)}},event:{get:!0,set:!0,opts:{overwrite:!0}},document:{get:function(){"use strict";const a=b.document;e(a);return a}},clearInterval:{get:function(){"use strict";return b.clearInterval}},clearTimeout:{get:function(){"use strict";return b.clearTimeout}},addEventListener:{enhance:function(){"use strict";return J(b.addEventListener,
arguments,1,!0)}},removeEventListener:{enhance:function(){"use strict";return J(b.removeEventListener,arguments,1,!0)}}};(()=>{let a=ya(b.frames.length,7);g.length={get:!0,opts:{get_cb:function(c,d){"use strict";c=b.frames.length;for(let e=a;e<c;e++)d(b.String(e),{get:!0});a=ya(c,a)}}};for(let c=0;c<a;c++)g[b.String(c)]={get:!0}})();d(p(b),a=>{b[a]!=w&&(g[a]=g[a]||{enhance:b[a]})});const k=l(c,w,a.windowProps,g),m={context:k,filter:function(a){"use strict";return a==w?k:a},filterEvent:function(a){const b=
{};for(const c in a)if("function"===typeof a[c])b[c]=(()=>{const b=c;return function(){return v(a[b],a,arguments)}})();else{const d=m.filter(a[c]);b[c]=d}return b}};return m})()},Z=()=>r({},b.console,{debug:P,log:y,info:Ha,warn:M,error:ma},!1),na=(e,g,k,m,l,f)=>{let t=null;const r=()=>"[Tampermonkey property]";try{const q=m.sandboxes[e.uuid],h=["context","fapply"],n=[void 0,void 0],u=m.elements[e.uuid];d(p(u),a=>{const b=u[a];b.overwrite?(c(h,a),c(n,b.value)):b.context_prop||(c(h,a),c(n,`context.${a}`),
b.getter?L(q,a,{get:b.getter}):q[a]=b.value);b.protect&&q[a]&&F(q[a],"toString",r)});let w;t=W(["((context, fapply, console) => {","with (context) {","(module => {",'"use strict";',"try {",x.measure_scripts?`console.time("${w=`SCRIPT RUN TIME[${e.name.replace(/\W+/g," ")}]`}");\n`:"","fapply(module, context, [",W(n,","),"]);",x.measure_scripts?`console.timeEnd("${w}");\n`:"","} catch (e) {","if (e.message && e.stack) {","console.error(\"ERROR: Execution of script '",X(e.name,new b.RegExp("[\"']","g"),
"\\$1"),"' failed! \" + e.message);",'console.log(e.stack.replace(/(\\\\(eval at )?<anonymous>[: ]?)|([\\s.]*at Object.tms_[\\s\\S.]*)/g, ""));',"} else {","console.error(e);","}","}","})","(function ",l,"(",W(h,","),") {",x.enforce_strict_mode?'"use strict";\n':"",k,g,"\n","})","}","})(that.context, that.fapply, that.console);\n",f?`//# sourceURL=${f}\n`:""],"");const E={context:q,fapply:v,console:Z()};a.E_u(t,E)}catch(q){U.syntaxCheck(W([k,g],""),a=>{let c="";if(a.errors){const b=Aa(k,"\n").length-
1;let e="";a.errors&&d(p(a.errors),c=>{if((c=a.errors[c])&&0<=c.line&&c.reason){const a=c.line;e+=W([a>b?"script:":"require:"," (",c.code,") ",X(c.reason,/.$/,"")," on line: ",a>b?a-b:a," at character: ",c.character,"\n"],"")}});c=`JSHINT output:\n${e}`}else c=g;const f=q.stack?X(q.stack,/(\\(eval at )?<anonymous>[: ]?)|([\s.]*at Object.tms_[\s\S.]*)/g,""):"";n||a.errors?ma(`Syntax error @ "${e.name}"!\n##########################\n${c}##########################\n\n${f}`):ma(`Syntax error @ "${e.name}"!\n\n`,
f);b.setTimeout(()=>{throw q;},1)})}};return{create:function(k){const m=k.script,r={},x=-1!==ha(m.grant,"none"),l=`${m.namespace}_${x}`;void 0===a.props[l]&&(a.props[l]={sandboxes:{},elements:{}},c(Ea,()=>{a.props[l]=null}));r.CDATA={value:function(a){g("CDATA");this.src=a;this.toXMLString=this.toString=function(){return this.src}}};r.uneval={value:function(a){g("window.uneval");try{return`\\$1 = ${ua(a)};`}catch(z){y(z)}}};r.define={value:void 0};r.module={value:void 0};r.exports={value:void 0};
const f={},t={},B={},q={},h=U.of(k);g(m.options.run_at||"<default>","run_at");if(x)g("none","grant");else{g("sandbox","grant");r.window={value:"context",overwrite:!0};const a={window:w};d(p(a),b=>{const c=`unsafe${X(b,/^(.)/g,a=>Qa(a))}`;r[c]={value:a[b]};-1!=ha(m.grant,c)&&g(c,"grant")});r.console={value:Z()};r.cloneInto={value:function(a){g("compat.cloneInto");return a}};r.exportFunction={value:function(a,b,c){g("compat.exportFunction");c&&void 0!==c.defineAs&&(b[c.defineAs]=a);return a}};r.createObjectIn=
{value:function(a,b){g("compat.createObjectIn");const c={};b&&void 0!==b.defineAs&&(a[b.defineAs]=c);return c}};f.addStyle=U.addStyle;f.addElement=U.addElement;f.deleteValue=h.deleteValue;f.listValues=h.listValues;f.getValue=h.getValue;f.setValue=h.setValue;f.log=U.log;f.registerMenuCommand=h.registerMenuCommand;f.unregisterMenuCommand=h.unregisterMenuCommand;f.openInTab=h.openInTab;f.addValueChangeListener=h.addValueChangeListener;f.removeValueChangeListener=h.removeValueChangeListener;q.xmlhttpRequest=
h.xmlhttpRequest;q.download=h.download;f.webRequest=h.webRequest;t.getTab=h.getTab;f.setTab=h.setTab;f.saveTab=h.setTab;t.getTabs=h.getTabs;f.getResourceText=h.getResourceText;q.getResourceURL=h.getResourceURL;t.setClipboard={cb:2,fn:U.setClipboard};const b=a=>function(){const b=Na(v(a,this,arguments));F(b,"then",a=>Oa(b,a));F(b,"catch",a=>Pa(b,a));return b},c=(a,b)=>{let c;const e=new ra((e,f)=>{const g={},h=b.onload,m=b.ontimeout,l=b.onerror;d(p(b),a=>{g[a]=b[a]});g.onerror=function(a){f(a);l&&
v(l,this,arguments)};g.ontimeout=function(a){f(a);m&&v(m,this,arguments)};g.onload=function(a){e(a);h&&v(h,this,arguments)};const k=a(g).abort;!0===c?k():c=k});F(e,"abort",()=>{c?c():c=!0});return e};d(p(q),a=>{B[`GM_${a}`]={value:q[a]}});d(p(t),a=>{const b=t[a];B[`GM_${a}`]={value:b.fn||b};B[`GM.${a}`]={value:function(){let a,c=[];if(void 0===b.cb)a=b;else{a=b.fn;for(let a=0;a<b.cb;a++)c.push(arguments[a]||void 0)}return new ra(b=>{v(a,this,[...c,b])})}}});d(p(f),a=>{const c=f[a];B[`GM_${a}`]={value:c};
B[`GM.${a}`]={getter:function(){return b(c)}}});B["GM.getResourceUrl"]={getter:function(){return b(q.getResourceURL)}};B["GM.xmlHttpRequest"]={value:function(a){return c(q.xmlhttpRequest,a)}};B["GM.download"]={value:function(a){return c(q.download,a)}};B.GM_notification={value:function(a,b,c,e){let f=null;const g="timeout text image title highlight silent".split(" ");let l=null;const k={};"object"===typeof a&&(l=a);l?(d(g,a=>{k[a]=l[a]}),f=l.ondone,e=l.onclick,"function"===typeof b&&(f=b)):(k.image=
c,k.title=b,k.text=a);k.text&&(k.image=k.image||m.icon64||m.icon,k.title=k.title||m.name);k.onclick=e;k.ondone=f;h.notification(k)}};B["GM.notification"]={value:function(a){return"object"!==typeof a?M("GM.notification(details): received no details"):new ra((b,c)=>{d(p(a),a=>{});h.notification(a)})}};B.GM_cookie={value:(()=>{const a=h.cookie,b=(b,c,d)=>(a[b]||(()=>{}))(c,d);d(p(a),c=>{b[c]=a[c]});return b})()};B["GM.cookie"]={value:(()=>{const a=(a,b)=>new ra((c,d)=>{"list"==a?B.GM_cookie.value(a,
b,(a,b)=>{b?d(b):c(a)}):B.GM_cookie.value(a,b,a=>{a?d(a):c()})});d(p(h.cookie),b=>{a[b]=c=>a(b,c)});return a})()};B["window.close"]={context_prop:!0};B["window.focus"]={context_prop:!0}}B.GM_info=B["GM.info"]={getter:h.getInfo};const J={};r.GM={value:J,protect:!0};Y(r,m.grant,B,(a,b)=>{if("GM."===a.substr(0,3))a=a.split(".")[1],L(J,a,{get:b.getter?b.getter:()=>b.value});else return b.protect=!0,b});m.options.compat_prototypes&&((u||n)&&y("env: option: add toSource"),b.Object.prototype.toSource||la(b.Object.prototype,
{toSource:{value:function(){g("Object.toSource");var a=aa.toType(this);if("String"===a)return`(String("${X(this,new b.RegExp('"',"g"),'\\"')}"))`;if("Number"===a)return`(Number("${b.Number(this)}"))`;if("Array"===a){a="(new Array(";for(let b=0;b<this.length;b++){const c=aa.toType(this[b]);a="Null"===c?a+"null":"Undefined"===c?a+"undefined":a+this[b].toSource();b+1<this.length&&(a+=",")}return a+="))"}return`JSON.parse(unescape("${b.escape(ua(this))}"))`},enumerable:!1,writable:!0,configurable:!0}}),
(u||n)&&y("env: option: add some array generics"),d("indexOf lastIndexOf filter forEach every map some slice".split(" "),a=>{if("function"!==typeof b.Array[a]){const c={};c[a]={value:function(c){g(`Array.${a}`);return v(b.Array.prototype[a],c,v(e.wrappedJSObject,arguments,[1]))},enumerable:!1,writable:!0,configurable:!0};la(b.Array,c)}}));let C="";if(x)var D=new Window;else{const a=ia(r,b=>{T(b);I(b);Q(b,2,a.filterEvent)});D={run_at:m.options.run_at,uuid:m.uuid};C=`tms_${X(m.uuid,/-/g,"_")}`;G[C]=
D;Q(a.context,1,a.filterEvent);D=a.context}a.props[l].sandboxes[m.uuid]=D;a.props[l].elements[m.uuid]=r;(u||n)&&P(`env: execute script ${m.name} @ the ${x?"un":""}safe context now!`);na(m,k.code,k.requires,a.props[l],C,k.source_url)}}})();(()=>{if(x.external_connect){var a;if(a=w.external){const b=(a,b)=>{m.send("external.message",a,a=>{b&&b(a)})};try{la(a,{Tampermonkey:{get:function(){return{getVersion:function(a){b({method:"getVersion"},a)},isInstalled:function(a,c,d){"function"===typeof c&&(d=
c,c=null);b({method:"isInstalled",script:{name:a,namespace:c}},d)}}},configurable:!0}})}catch(sa){}}}})();m.onMessage.setListener(b=>{const c=b.a;"load"==b.m?(a.pageLoaded=!0,Z.runListeners()):"DOMContentLoaded"==b.m?(a.domContentLoaded=!0,Z.runListeners()):"setForeignAttr"==b.m?w[c.attr]=c.value:"port.message"==b.m?Q.message(c):"executeScript"==b.m?Z.run(b.a):"cleanup"==b.m?m.cleanup():n&&y("env: unkown method",b)});n&&y("Tampermonkey started");d(a.scripts,a=>{Z.run(a)})}}))());
